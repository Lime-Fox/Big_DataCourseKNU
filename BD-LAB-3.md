# **BD-LAB-3**

**ОБЩАЯ ИНФОРМАЦИЯ:**
```
В этой лабораторной работе необходимо считать WEB страницу с сайта IMDB.com 
со 100 фильмами 2017 выхода по ссылке: 
«http://www.imdb.com/search/title?count=100&release_date=2017,2017&title_type = feature ».
(Для выполнения лабораторной рекомендуется использовать библиотеку «rvest»)

Необходимо создать data.frame «movies» со следующими данными:                                                                           
НОМЕР ФИЛЬМА - (rank_data)                                                                                                               НАЗВАНИЕ ФИЛЬМА - (title_data)                                                                                                            ПРОДОЛЖИТЕЛЬНОСТЬ - (runtime_data)                                                                                                         
Для считывания URL - функция read_html                                                                                     
Для считывания данных по CSS селектору - html_nodes                                                                                   Для преобразования считанных HTML-данных в текст - функция html_text   

CSS селекторы для считывания необходимых данных:  
rank_data: «.text-primary»
title_data «.lister-item-header»
runtime_data «.text-muted .runtime»
    

                                                                          
Рекомендуется превратить rank_data и runtime_data из текста в числовые значения.
                                                         
При формировании дата фрейма функцией data.frame рекомендуется использовать параметр                                                     «stringsAsFactors = FALSE».**
```

```
ПРЕДВАРИТЕЛЬНО:

Установка и загрузка библиотек xml2 и rvest - работа с XML-файлами:

install.packages('xml2')
library('xml2')
install.packages("rvest")
library(rvest)
```


**БАЗОВЫЙ БЛОК:**
```
1. - Считывание html-файла:
f.html = read_html("http://www.imdb.com/search/title?count=100&release_date=2017,2017&title_type=feature")
```

```
2. - Преобразование считанных html-данных в текст:
     (Номер фильма и продолжительность - последующий перевод в числовой формат - as.numeric )

Номер фильма:
rank_data <- html_text(html_nodes(f.html,'.text-primary'))
rank_data
cor.rank_data <- as.numeric(rank_data)
cor.rank_data

Название фильма:
title_data <- html_text(html_nodes(f.html,'.lister-item-header a'))
title_data

Продолжительность (runtime_data):  
runtime_data <- html_text(html_nodes(f.html,'.text-muted .runtime'))
runtime_data
```
```
 [1] "1."   "2."   "3."   "4."   "5."   "6."   "7."   "8."   "9."   "10."  "11."  "12."  "13."  "14."  "15."  "16."  "17."  "18."  "19."  "20."  "21."  "22." 
 [23] "23."  "24."  "25."  "26."  "27."  "28."  "29."  "30."  "31."  "32."  "33."  "34."  "35."  "36."  "37."  "38."  "39."  "40."  "41."  "42."  "43."  "44." 
 [45] "45."  "46."  "47."  "48."  "49."  "50."  "51."  "52."  "53."  "54."  "55."  "56."  "57."  "58."  "59."  "60."  "61."  "62."  "63."  "64."  "65."  "66." 
 [67] "67."  "68."  "69."  "70."  "71."  "72."  "73."  "74."  "75."  "76."  "77."  "78."  "79."  "80."  "81."  "82."  "83."  "84."  "85."  "86."  "87."  "88." 
 [89] "89."  "90."  "91."  "92."  "93."  "94."  "95."  "96."  "97."  "98."  "99."  "100."
```
```
 [1] "Тор: Рагнарок"                            "Воно"                                     "Людина-павук: Повернення додому"         
 [4] "Рятувальники Малiбу"                      "Вартовi Галактики 2"                      "1+1: Нова iсторiя"                       
 [7] "Пастка"                                   "Зорянi вiйни: Епiзод 8 - Останнi Джедаi"  "Джон Уiк 2"                              
 [10] "Найвеличнiший шоумен"                     "Диво-Жiнка"                               "Джуманджi: Поклик джунглiв"              
 [13] "Лiга справедливостi"                      "Той, хто бiжить по лезу 2049"             "Трансформери: Останнiй лицар"            
 [16] "Пiрати Карибського моря: Помста Салазара" "Unicorn Store"                            "Death House"                             
 [19] "На драйвi"                                "Логан: Росомаха"                          "Call Me by Your Name"                    
 [22] "Три бiлборди пiд Еббiнгом, Мiссурi"       "Форма води"                               "Конг: Острiв черепа"                     
 [25] "Мати!"                                    "Дюнкерк"                                  "Коко"                                    
 [28] "Brawl in Cell Block 99"                   "Вiтряна рiка"                             "Диво"                                    
 [31] "A Dog's Purpose"                          "Привид у бронi"                           "Красуня i Чудовисько"                    
 [34] "Kingsman: Золоте кiльце"                  "Форсаж 8"                                 "Happy Death Day"                         
 [37] "Чужий: Заповiт"                           "Метелик"                                  "My Friend Dahmer"                        
 [40] "Гра Моллi"                                "Обдарована"                               "Ледi Бьорд"                              
 [43] "Темна вежа"                               "Вбивство в Схiдному експресi"             "Король Артур: Легенда меча"              
 [46] "Пострiл в безодню"                        "Валерiан i мiсто тисячi планет"           "Saban's Могутнi рейнджери"               
 [49] "Атомна Блондинка"                         "Мумiя"                                    "Тебе нiколи тут не було"                 
 [52] "The Disaster Artist"                      "Темнi часи"                               "To the Bone"                             
 [55] "Gerald's Game"                            "Сiм сестер"                               "Я, Тоня"                                 
 [58] "Яскравi"                                  "Секретне досьe"                           "Тiлоохоронець кiлера"                    
 [61] "Розваги дорослих дiвчат"                  "Вбивство священного оленя"                "Життя"                                   
 [64] "Удача Лохана"                             "The Beguiled"                             "Смерть Сталiна"                          
 [67] "Escape Room"                              "П'ятдесят вiдтiнкiв темряви"              "Геошторм"                                
 [70] "Вороги"                                   "The Babysitter"                           "Баррi Сiл: Король контрабанди"           
 [73] "Mary Shelley"                             "Примарна нитка"                           "Disobedience"                            
 [76] "The Ritual"                               "Шкiряне обличчя"                          "Анабель 2"                               
 [79] "Окча"                                     "Американський убивця"                     "The Wife"                                
 [82] "Revenge"                                  "1922"                                     "xXx: Реактивiзацiя"                      
 [85] "Only the Brave"                           "Iноземець"                                "Der Hauptmann"                           
 [88] "Mercy"                                    "Таемний агент"                            "Pitch Perfect 3"                         
 [91] "The Snowman"                              "Сфера"                                    "The Glass Castle"                        
 [94] "Den 12. mann"                             "Newness"                                  "Зменшення"                               
 [97] "Вiйна за планету мавп"                    "Тачки 3"                                  "47 Meters Down"
```
```
 [1] "130 min" "135 min" "133 min" "116 min" "136 min" "126 min" "104 min" "152 min" "122 min" "105 min" "141 min" "119 min" "120 min" "164 min" "154 min"
 [16] "129 min" "92 min"  "95 min"  "112 min" "137 min" "132 min" "115 min" "123 min" "118 min" "121 min" "106 min" "105 min" "132 min" "107 min" "113 min"
 [31] "100 min" "107 min" "129 min" "141 min" "136 min" "96 min"  "122 min" "133 min" "107 min" "140 min" "101 min" "94 min"  "95 min"  "114 min" "126 min"
 [46] "121 min" "137 min" "124 min" "115 min" "110 min" "89 min"  "104 min" "125 min" "107 min" "103 min" "123 min" "120 min" "117 min" "116 min" "118 min"
 [61] "101 min" "121 min" "104 min" "118 min" "93 min"  "107 min" "81 min"  "118 min" "109 min" "134 min" "85 min"  "115 min" "120 min" "130 min" "114 min"
 [76] "94 min"  "90 min"  "109 min" "120 min" "112 min" "99 min"  "108 min" "102 min" "107 min" "134 min" "113 min" "118 min" "108 min" "98 min"  "93 min" 
 [91] "119 min" "110 min" "127 min" "135 min" "117 min" "135 min" "140 min" "102 min" "89 min"  "108 min"
```

```
3. - Создание дата-фрейма 'movies':
movies <- data.frame(Rank = rank_data, Title = title_data, Runtime = runtime_data, stringsAsFactors = FALSE)
movies
```
```
RANK                                  TITLE    RUNTIME
1.                            Тор: Рагнарок      130
2.                                     Воно      135
3.          Людина-павук: Повернення додому      133
4.                      Рятувальники Малiбу      116
5.                      Вартовi Галактики 2      136
6.                        1+1: Нова iсторiя      126
7.                                   Пастка      104
8.  Зорянi вiйни: Епiзод 8 - Останнi Джедаi      152
9.                               Джон Уiк 2      122
10.                     Найвеличнiший шоумен     105
11.                               Диво-Жiнка     141
12.               Джуманджi: Поклик джунглiв     119
13.                      Лiга справедливостi     120
14.             Той, хто бiжить по лезу 2049     164
15.             Трансформери: Останнiй лицар     154
16. Пiрати Карибського моря: Помста Салазара     129
17.                            Unicorn Store      92
18.                              Death House      95
19.                                На драйвi     112
20.                          Логан: Росомаха     137
....................................................
....................................................
....................................................
98.                                  Тачки 3     102
99.                           47 Meters Down     89
100.                               Фердинанд     108
```

## **TASK-1**
**Выведите первые 6 названий фильмов дата фрейма** 

```
movies[1:6,]
```
```
 RANK                            TITLE   RUNTIME
1.                   Тор: Рагнарок     130
2.                            Воно     135
3. Людина-павук: Повернення додому     133
4.             Рятувальники Малiбу     116
5.             Вартовi Галактики 2     136
6.               1+1: Нова iсторiя     126
```

## **TASK-2**
**Выведите все названия фильмов с продолжительностью более 120 мин.**

```
movies[movies$runtime > 120, "TITLE"]
```
```
"Тор: Рагнарок"                            "Воно"                                     "Людина-павук: Повернення додому"         
"Вартовi Галактики 2"                      "1+1: Нова iсторiя"                        "Зорянi вiйни: Епiзод 8 - Останнi Джедаi" 
"Джон Уiк 2"                               "Диво-Жiнка"                               "Той, хто бiжить по лезу 2049"            
"Трансформери: Останнiй лицар"             "Пiрати Карибського моря: Помста Салазара" "Логан: Росомаха"                         
"Call Me by Your Name"                     "Форма води"                               "Мати!"                                   
"Brawl in Cell Block 99"                   "Красуня i Чудовисько"                     "Kingsman: Золоте кiльце"                 
"Форсаж 8"                                 "Чужий: Заповiт"                           "Метелик"                                 
"Гра Моллi"                                "Король Артур: Легенда меча"               "Пострiл в безодню"                       
"Валерiан i мiсто тисячi планет"           "Saban's Могутнi рейнджери"                "Темнi часи"                              
"Сiм сестер"                               "Вбивство священного оленя"                "Вороги"                                  
"Примарна нитка"                           "Only the Brave"                           "The Glass Castle"                        
"Den 12. mann"                             "Зменшення"                                "Вiйна за планету мавп"      
```

## **TASK-3**
**Сколько фильмов имеют продолжительность менее 100 мин.**

```
sum(movies$RUNTIME < 100)
```
```
15
```
